add_fog_respite_effect = {
	optimize_memory
	fleet = {
		every_controlled_ship = {
			limit = {
				is_ship_class = shipclass_starbase
				NOT = { has_component = "STARBASE_AURA_FOG_RESPITE" }
			}
			starbase = {
				add_starbase_component = {
			        component = "STARBASE_AURA_FOG_RESPITE"
			    }
			}
		}
	}
}

unprosper_effect = {
	optimize_memory
	capital_scope = {
		random_owned_pop = { kill_pop = yes }
		random_owned_pop = { kill_pop = yes }
		random_owned_pop = { kill_pop = yes }
		random_owned_pop = { kill_pop = yes }
		remove_district = district_generator
		remove_modifier = prosp_uni_mod
		remove_modifier = prosp_uni_mod_gestalt
	}
}

stagehand_effect = {
	optimize_memory
	set_country_type = stagehand
	every_owned_pop = { kill_pop = yes }
	every_owned_fleet = { delete_fleet = { target = this destroy_template = no } }	
	add_modifier = { modifier = stagehand }
	give_tier_1_techs_effect = yes
	give_tier_2_techs_effect = yes
}

fog_init_1_effect = {
	optimize_memory
	every_system = { 
		random_list = { 
			40 = {  } 
			30 = {
				create_nebula = {
					radius = 40
					effect = {
						add_modifier = { modifier = the_fog }
						fog_init_2_effect = yes
						fog_nebulize_effect = yes
					}
				}
			}
			30 = {
				create_nebula = {
					radius = 40
					effect = {
						add_modifier = { modifier = the_fog }
						fog_init_3_effect = yes
						fog_nebulize_effect = yes
					}
				}
			}
		}
	}
}

fog_init_2_effect = {
	optimize_memory
	solar_system = {
		if = {
			limit = {
				NOR = {
					starting_system = yes
					is_star_class = sc_binary_1
					is_star_class = sc_binary_2
					is_star_class = sc_binary_3
					is_star_class = sc_binary_4
					is_star_class = sc_binary_5
					is_star_class = sc_binary_6
					is_star_class = sc_binary_7
					is_star_class = sc_binary_8
					is_star_class = sc_binary_9
					is_star_class = sc_binary_10
					is_star_class = sc_trinary_1
					is_star_class = sc_trinary_2
					is_star_class = sc_trinary_3
					is_star_class = sc_trinary_4
					is_star_class = sc_black_hole
				}
			}
			random_list = {
				99 = { set_star_class = sc_toxoid_star }
				1 = { set_star_class = sc_black_hole }
			}
		}
	}
}

fog_init_3_effect = {
	optimize_memory
	solar_system = {
		if = {
			limit = {
				NOR = {
					starting_system = yes
					is_star_class = sc_binary_1
					is_star_class = sc_binary_2
					is_star_class = sc_binary_3
					is_star_class = sc_binary_4
					is_star_class = sc_binary_5
					is_star_class = sc_binary_6
					is_star_class = sc_binary_7
					is_star_class = sc_binary_8
					is_star_class = sc_binary_9
					is_star_class = sc_binary_10
					is_star_class = sc_trinary_1
					is_star_class = sc_trinary_2
					is_star_class = sc_trinary_3
					is_star_class = sc_trinary_4
					is_star_class = sc_black_hole
				}
			}
			random_list = {
				99 = { set_star_class = sc_pulsar }
				1 = { set_star_class = sc_black_hole }
			}
		}
	}
}

fog_nebulize_effect = {
	optimize_memory
	star = {
		random_list = {
			10 = { create_ambient_object = { type = nebula_1 } }
			10 = { create_ambient_object = { type = nebula_2 } }
			10 = { create_ambient_object = { type = nebula_3 } }
			10 = { create_ambient_object = { type = nebula_4 } }
			10 = { create_ambient_object = { type = rare_nebula_1 } }
			10 = { create_ambient_object = { type = rare_nebula_2 } }
			10 = { create_ambient_object = { type = turbulent_nebula_1 } }
			10 = { create_ambient_object = { type = turbulent_nebula_2 } }
		}
	}
}

give_tier_1_techs_effect = {
	optimize_memory
	set_country_flag = tier_1_teched
	give_technology = { tech = tech_basic_science_lab_2 message = no }
	give_technology = { tech = tech_space_science_1 message = no }
	give_technology = { tech = tech_space_science_2 message = no }
	give_technology = { tech = tech_physics_1 message = no }
	give_technology = { tech = tech_administrative_ai message = no }
	give_technology = { tech = tech_cryostasis_1 message = no }
	give_technology = { tech = tech_automated_exploration message = no }
	give_technology = { tech = tech_combat_computers_1 message = no }
	give_technology = { tech = tech_auxiliary_fire_control message = no }
	give_technology = { tech = tech_encryption_1 message = no }
	give_technology = { tech = tech_decryption_1 message = no }
	give_technology = { tech = tech_fusion_power message = no }
	give_technology = { tech = tech_reactor_boosters_2 message = no }
	give_technology = { tech = tech_reactor_boosters_3 message = no }
	give_technology = { tech = tech_shields_2 message = no }
	give_technology = { tech = tech_power_plant_2 message = no }
	give_technology = { tech = tech_power_hub_1 message = no }
	if = {
		limit = {
			is_regular_empire = yes
		}
		give_technology = { tech = tech_space_trading message = no  }
	}
	give_technology = { tech = tech_eco_simulation message = no }
	give_technology = { tech = tech_hydroponics message = no }
	give_technology = { tech = tech_food_processing_1 message = no }
	give_technology = { tech = tech_society_1 message = no }
	if = {
		limit = {
			is_regular_empire = yes
		}
		give_technology = { tech = tech_alien_life_studies message = no }
	}
	if = {
		limit = {
			is_regular_empire = yes
		}
		give_technology = { tech = tech_frontier_health message = no }
	}
	give_technology = { tech = tech_dense_jungle message = no }
	give_technology = { tech = tech_quicksand_basin message = no }
	give_technology = { tech = tech_noxious_swamp message = no }
	give_technology = { tech = tech_massive_glacier message = no }
	give_technology = { tech = tech_toxic_kelp message = no }
	give_technology = { tech = tech_deep_sinkhole message = no }
	if = {
		limit = {
			OR = {
				NOT = { has_authority = auth_machine_intelligence }
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
			}
		}
		give_technology = { tech = tech_genome_mapping message = no }
	}
	give_technology = { tech = tech_ground_defense_planning message = no }
	give_technology = { tech = tech_planetary_unification message = no }
	give_technology = { tech = tech_adaptive_bureaucracy message = no }
	if = {
		limit = {
			is_regular_empire = yes
		}
		give_technology = { tech = tech_neural_implants message = no }
	}
	if = {
		limit = {
			is_gestalt = no
		}
		give_technology = { tech = tech_hyper_entertainment_forum message = no }
	}
	if = {
		limit = {
			NOR = {
				has_ethic = ethic_spiritualist
				has_ethic = ethic_fanatic_spiritualist
				has_valid_civic = civic_machine_servitor
			}
		}
		give_technology = { tech = tech_heritage_site message = no }
	}
	give_technology = { tech = tech_corvette_build_speed message = no }
	give_technology = { tech = tech_corvette_hull_1 message = no }
	give_technology = { tech = tech_strike_craft_1 message = no }
	give_technology = { tech = tech_ship_armor_2 message = no }
	give_technology = { tech = tech_powered_exoskeletons message = no }
	give_technology = { tech = tech_space_mining_1 message = no }
	give_technology = { tech = tech_space_mining_2 message = no }
	give_technology = { tech = tech_mining_1 message = no }
	give_technology = { tech = tech_mineral_purification_1 message = no }
	give_technology = { tech = tech_alloys_1 message = no }
	give_technology = { tech = tech_luxuries_1 message = no }
	give_technology = { tech = tech_engineering_1 message = no }
	give_technology = { tech = tech_robotic_workers message = no }
	give_technology = { tech = tech_afterburners_1 message = no }
	give_technology = { tech = tech_assembly_pattern message = no }
}

give_tier_2_techs_effect = {
	optimize_memory
	set_country_flag = tier_2_teched
	give_technology = { tech = tech_curator_lab message = no }
	if = {
		limit = {
			has_ancrel = yes
		}
		give_technology = { tech = tech_archeology_lab_ancrel message = no }
	}
	else = {
		give_technology = { tech = tech_archeology_lab message = no }
	}
	give_technology = { tech = tech_space_science_3 message = no }
	give_technology = { tech = tech_space_science_4 message = no }
	give_technology = { tech = tech_physics_2 message = no }
	give_technology = { tech = tech_self_aware_logic message = no }
	if = {
		limit = {
			OR = {
				is_gestalt = no
				has_valid_civic = civic_machine_servitor
			}
		}
		give_technology = { tech = tech_consumer_good_refinement_1 message = no }
	}
	give_technology = { tech = tech_encryption_2 message = no }
	give_technology = { tech = tech_decryption_2 message = no }
	give_technology = { tech = tech_cold_fusion_power message = no }
	give_technology = { tech = tech_shields_3 message = no }
	give_technology = { tech = tech_shield_rechargers_1 message = no }
	give_technology = { tech = tech_sensors_2 message = no }
	give_technology = { tech = tech_power_plant_3 message = no }
	give_technology = { tech = tech_power_hub_2 message = no }
	give_technology = { tech = tech_hyper_drive_2 message = no }
	give_technology = { tech = tech_ftl_inhibitor message = no }
	give_technology = { tech = tech_gene_crops message = no }
	give_technology = { tech = tech_society_2 message = no }
	give_technology = { tech = tech_arcane_deciphering message = no }
	if = {
		limit = {
			OR = {
				is_machine_empire = no
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
			}
		}
		give_technology = { tech = tech_colonization_2 message = no }
	}
	if = {
		limit = {
			OR = {
				is_machine_empire = no
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
			}
		}
		give_technology = { tech = tech_colonization_3 message = no }
	}
	if = {
		limit = {
			is_gestalt = no
		}
		give_technology = { tech = tech_frontier_hospital message = no }
	}
	give_technology = { tech = tech_mountain_range message = no }
	give_technology = { tech = tech_volcano message = no }
	give_technology = { tech = tech_dangerous_wildlife message = no }
	give_technology = { tech = tech_terrestrial_sculpting message = no }
	if = {
		limit = {
			OR = {
				NOT = { has_authority = auth_machine_intelligence }
				has_civic = civic_machine_assimilator
			}
		}
		give_technology = { tech = tech_vitality_boosters message = no }
	}
	if = {
		limit = {
			NOT = {
				has_valid_civic = civic_fanatic_purifiers
				#has_valid_civic = civic_machine_terminator # covered by not being machine
				#has_valid_civic = civic_hive_devouring_swarm # can uplift to make delicious
			}
			OR = {
				NOT = { has_authority = auth_machine_intelligence }
				has_civic = civic_machine_assimilator
				has_civic = civic_machine_servitor
			}
		}
		give_technology = { tech = tech_epigenetic_triggers message = no }
	}
	if = {
		limit = {
			OR = {
				NOT = { has_authority = auth_machine_intelligence }
				has_civic = civic_machine_assimilator
			}
		}
		give_technology = { tech = tech_cloning message = no }
	}
	if = {
		limit = {
			OR = {
				NOT = { has_authority = auth_machine_intelligence }
				has_civic = civic_machine_assimilator
			}
		}
		give_technology = { tech = tech_gene_banks message = no }
	}
	give_technology = { tech = tech_doctrine_fleet_size_1 message = no }
	give_technology = { tech = tech_doctrine_fleet_size_2 message = no }
	give_technology = { tech = tech_interstellar_fleet_traditions message = no }
	give_technology = { tech = tech_doctrine_navy_size_1 message = no }
	give_technology = { tech = tech_centralized_command message = no }
	give_technology = { tech = tech_global_defense_grid message = no }
	give_technology = { tech = tech_galactic_ambitions message = no }
	give_technology = { tech = tech_interstellar_campaigns message = no }
	give_technology = { tech = tech_colonial_centralization message = no }
	give_technology = { tech = tech_planetary_infrastructure_1 message = no }
	if = {
		limit = {
			NOT = { has_ethic = ethic_gestalt_consciousness	}
		}
		give_technology = { tech = tech_subdermal_stimulation message = no }
	}
	give_technology = { tech = tech_effective_bureaucracy message = no }
	give_technology = { tech = tech_colonial_bureaucracy message = no }
	if = {
		limit = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		give_technology = { tech = tech_living_state message = no }
	}
	if = {
		limit = {
			has_ethic = ethic_gestalt_consciousness
		}
		give_technology = { tech = tech_autonomous_agents message = no }
	}
	if = {
		limit = {
			NOT = { has_ethic = ethic_gestalt_consciousness }
		}
		give_technology = { tech = tech_artificial_moral_codes message = no }
	}
	if = {
		limit = {
			is_gestalt = yes
		}
		give_technology = { tech = tech_unity_of_purpose message = no }
	}
	if = {
		limit = {
			is_spiritualist = yes
		}
		give_technology = { tech = tech_holographic_rituals message = no }
	}
	if = {
		limit = {
			is_hive_empire = yes
		}
		give_technology = { tech = tech_hive_cluster message = no }
	}
	if = {
		limit = {
			is_gestalt = no
		}
		give_technology = { tech = tech_slave_colonies message = no }
	}
	if = {
		limit = {
			is_regular_empire = yes
		}
		give_technology = { tech = tech_xeno_diplomacy message = no }
	}
	give_technology = { tech = tech_capital_productivity_1 message = no }
	give_technology = { tech = tech_destroyers message = no }
	give_technology = { tech = tech_corvette_hull_2 message = no }
	give_technology = { tech = tech_destroyer_build_speed message = no }
	give_technology = { tech = tech_destroyer_hull_1 message = no }
	give_technology = { tech = tech_starbase_3 message = no }
	give_technology = { tech = tech_modular_engineering message = no }
	give_technology = { tech = tech_strike_craft_2 message = no }
	give_technology = { tech = tech_ship_armor_3 message = no }
	give_technology = { tech = tech_crystal_armor_1 message = no }
	give_technology = { tech = tech_thrusters_2 message = no }
	give_technology = { tech = tech_defense_platform_hull_1 message = no }
	give_technology = { tech = tech_space_mining_3 message = no }
	give_technology = { tech = tech_space_mining_4 message = no }
	give_technology = { tech = tech_mining_2 message = no }
	give_technology = { tech = tech_mineral_purification_2 message = no }
	give_technology = { tech = tech_advanced_metallurgy_1 message = no }
	give_technology = { tech = tech_engineering_2 message = no }
	give_technology = { tech = tech_droid_workers message = no }
	give_technology = { tech = tech_housing_1 message = no }
}

fog_dense_effect = {
	optimize_memory
	solar_system = {
		set_star_flag = volatile_star
		add_modifier = { modifier = devouring_nebula }
		every_neighbor_system = {
			limit = {
				NOT = { starting_system = yes }
				has_modifier = the_fog
			}
			set_star_flag = volatile_star
			add_modifier = { modifier = gnawing_nebula }
		}
	}
}

fog_easing = {
	optimize_memory
	every_country = {
		add_modifier = { modifier = easing days = 3600 }
	}
}